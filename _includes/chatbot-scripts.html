<script>  
window.onload = function(){    
    //script to toggle navbar dropdown menu im mobile view
    var navbarBurgers = document.getElementsByClassName('navbar-burger');
    if (navbarBurgers.length > 0) {
        if (window.getComputedStyle(navbarBurgers[0], null).getPropertyValue('display') == 'block') {
            
            //hide navbar dropdown menus on first load
            var navbarDropdowns = document.getElementsByClassName('navbar-dropdown');
            for (var i=0; i<navbarDropdowns.length; i++) {
                navbarDropdowns[i].style.display = 'none';
            }
            
            var navbarDropdown;
            var navbarItemLinks;
            var navbarItems = document.getElementsByClassName('navbar-item has-dropdown');
            for (var i=0; i<navbarItems.length; i++) {
               
                //toggle navbar dropdown menu              
                navbarItemLinks = navbarItems[i].getElementsByClassName('navbar-link');                
                if (navbarItemLinks.length > 0) {
                    navbarItemLinks[0].addEventListener('click', function (event) {
                        event.preventDefault();
                        var navbarDropdown = this.nextSibling;
                        while (navbarDropdown.className.indexOf('navbar-dropdown') == -1) {
                            navbarDropdown = navbarDropdown.nextSibling;
                        }
                        if (navbarDropdown.style.display == 'none') {
                            navbarDropdown.style.display = 'block';
                            this.className = this.className + ' is-active';
                        } else {
                            navbarDropdown.style.display = 'none';
                            this.className = this.className.replace('is-active','').trim();
                        }
                    });
                }
            }
        }
    }  
};    
</script>    

{%- if page.layout == 'leftnav-page-content' -%}
<script>
function toggleTriggerBarIconOnMouseover(event) {
    //event.target may not be the bo-dropdown-trigger element so we try to traverse the elements first
    var _this = event.target;
    while (_this.className.indexOf('bp-dropdown-trigger') == -1) {
        _this = _this.parentElement;
    }
    if (_this != null) {
        var dropdownIcons = _this.getElementsByClassName('sgds-icon');
        if (dropdownIcons.length > 0) {
            var dropdownIcon = dropdownIcons[0];
            if (dropdownIcon.className.indexOf('sgds-icon-chevron-down') != -1){
                dropdownIcon.className = dropdownIcon.className.replace('sgds-icon-chevron-down', 'sgds-icon-chevron-up');
            }
            else {
                dropdownIcon.className = dropdownIcon.className.replace('sgds-icon-chevron-up', 'sgds-icon-chevron-down');
            }   
        }
    }
    
    _this.removeEventListener('mouseover', toggleTriggerBarIconOnMouseover);
}

// script to toggle leftnav dropdown menu in mobile view
var mobileDropdownSections = document.getElementsByClassName('bp-section is-hidden-desktop');
if (mobileDropdownSections.length > 0) {
    //dropmenu bar is visible in mobile screen
    if (window.getComputedStyle(mobileDropdownSections[0], null).getPropertyValue('display') == 'block') {
        var dropdownTriggers = mobileDropdownSections[0].getElementsByClassName('bp-dropdown-trigger');
        if (dropdownTriggers.length > 0) {
            var dropdownTrigger = dropdownTriggers[0];    
            //toggle dropdown menu and dropdown trigger bar icon 
            dropdownTrigger.addEventListener('mouseover', function(event){
                dropdownTrigger.setAttribute('data-hasmouseover','true');
                dropdownTrigger.removeEventListener('mouseover', arguments.callee);
                var dropdownIcons = dropdownTrigger.getElementsByClassName('sgds-icon');
                var dropdownIcon;
                if (dropdownIcons.length > 0) {
                    dropdownIcon = dropdownIcons[0];
                    if (dropdownIcon.className.indexOf('sgds-icon-chevron-down') != -1){
                        dropdownIcon.className = dropdownIcon.className.replace('sgds-icon-chevron-down', 'sgds-icon-chevron-up');
                    }
                    else {
                        dropdownIcon.className = dropdownIcon.className.replace('sgds-icon-chevron-up', 'sgds-icon-chevron-down');
                    }   
                }
                
                dropdownTrigger.addEventListener('click', function (event) {
                    if (dropdownTrigger.getAttribute('data-hasmouseover')) {
                        dropdownTrigger.removeAttribute('data-hasmouserover');
                        return;
                    }
                    var dropdownMenus = document.getElementsByClassName('bp-dropdown-menu');
                    var dropdownIcons = dropdownTrigger.getElementsByClassName('sgds-icon');
                    if (dropdownMenus.length > 0) {
                        var dropdownMenu = dropdownMenus[0];
                        if (dropdownMenu.style.display == 'block' || window.getComputedStyle(dropdownMenu, null).getPropertyValue('display') == 'block') {
                            dropdownMenu.style.display = 'none';
                            if (dropdownIcon !== null) {
                                 dropdownIcon.className = dropdownIcon.className.replace('sgds-icon-chevron-up', 'sgds-icon-chevron-down');
                            }
                        }
                        else {
                            dropdownMenu.style.display = 'block';
                            if (dropdownIcon !== null) {
                                dropdownIcon.className = dropdownIcon.className.replace('sgds-icon-chevron-down', 'sgds-icon-chevron-up');
                            }
                        }
                    }           
                });
            });
        } 
    }
}
</script>    
{%- endif -%} 
