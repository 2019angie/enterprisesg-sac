
{%- if page.layout == 'faq' or page.layout == 'certified-companies' -%}
<script src="{{- "/assets/js/accordion.js" | relative_url -}}" crossorigin="anonymous"></script>
{%- endif -%}

<script>  
window.onload = function(){    
    //script to toggle navbar dropdown menu im mobile view
    var navbarBurgers = document.getElementsByClassName('navbar-burger');
    if (navbarBurgers.length > 0) {
        if (window.getComputedStyle(navbarBurgers[0], null).getPropertyValue('display') == 'block') {
            
            //hide navbar dropdown menus on first load
            var navbarDropdowns = document.getElementsByClassName('navbar-dropdown');
            for (var i=0; i<navbarDropdowns.length; i++) {
                navbarDropdowns[i].style.display = 'none';
            }
            
            var navbarDropdown;
            var navbarItemLinks;
            var navbarItems = document.getElementsByClassName('navbar-item has-dropdown');
            for (var i=0; i<navbarItems.length; i++) {
               
                //toggle navbar dropdown menu              
                navbarItemLinks = navbarItems[i].getElementsByClassName('navbar-link');                
                if (navbarItemLinks.length > 0) {
                    navbarItemLinks[0].addEventListener('click', function (event) {
                        event.preventDefault();
                        var navbarDropdown = this.nextSibling;
                        while (navbarDropdown.className.indexOf('navbar-dropdown') == -1) {
                            navbarDropdown = navbarDropdown.nextSibling;
                        }
                        if (navbarDropdown.style.display == 'none') {
                            navbarDropdown.style.display = 'block';
                            this.className = this.className + ' is-active';
                        } else {
                            navbarDropdown.style.display = 'none';
                            this.className = this.className.replace('is-active','').trim();
                        }
                    });
                }
            }
        }
    }  
};    
</script>    

{%- if page.layout == 'leftnav-page-content' or page.layout == 'our-team' -%}
<script>
// script to toggle leftnav dropdown menu in mobile view
var mobileDropdownSections = document.getElementsByClassName('bp-section is-hidden-desktop');
if (mobileDropdownSections.length > 0) {
    //dropmenu bar is visible in mobile screen
    if (window.getComputedStyle(mobileDropdownSections[0], null).getPropertyValue('display') == 'block') {
        var dropdownTriggers = mobileDropdownSections[0].getElementsByClassName('bp-dropdown-trigger');
        if (dropdownTriggers.length > 0) {
            var dropdownTrigger = dropdownTriggers[0];    
            //toggle dropdown menu and dropdown trigger bar icon 
            dropdownTrigger.addEventListener('click', function (event) {
                var dropdownMenus = document.getElementsByClassName('bp-dropdown-menu');
                var dropdownIcons = dropdownTrigger.getElementsByClassName('sgds-icon');
                var dropdownIcon;
                if (dropdownIcons.length > 0) {
                    dropdownIcon = dropdownIcons[0];
                }
                if (dropdownMenus.length > 0) {
                    var dropdownMenu = dropdownMenus[0];
                    if (dropdownMenu.style.display == 'block' || window.getComputedStyle(dropdownMenu, null).getPropertyValue('display') == 'block') {
                        dropdownMenu.style.display = 'none';
                        if (dropdownIcon !== null) {
                            dropdownIcon.className = dropdownIcon.className.replace('sgds-icon-chevron-up', 'sgds-icon-chevron-down');
                        }
                    }
                    else {
                        dropdownMenu.style.display = 'block';
                        if (dropdownIcon !== null) {
                            dropdownIcon.className = dropdownIcon.className.replace('sgds-icon-chevron-down', 'sgds-icon-chevron-up');
                        }
                    }
                }           
            });
        } 
        
        //edit top navigation buttons in 'our-team' layout  
        var boardOfDirectorButton = document.getElementById('board-of-directors-button');
        if (boardOfDirectorButton !== null) {
            var parentContainer = boardOfDirectorButton.parentElement;
            if (parentContainer !== null) {
                if (parentContainer.className.indexOf('bp-sec-button') !== -1) {
                    var grandParentContainer = parentContainer.parentElement;
                    if (grandParentContainer !== null) {
                        grandParentContainer.className = grandParentContainer.className.replace('padding--bottom--xl','').trim();
                        grandParentContainer.className = grandParentContainer.className + ' bp-overflow-buttons padding--left--none padding--right--none';
                        grandParentContainer.style.marginBottom = '4rem';
                        parentContainer.className = parentContainer.className.replace('bp-sec-button','bp-buttons').trim();
                    }
                }
            }
        }
    }
}
    
//edit nav title for 'overview' pages  
var titleSections = document.getElementsByClassName('bp-section-pagetitle');
if (titleSections.length > 0) {
    var pageTitles = titleSections[0].getElementsByTagName('h1');
    if (pageTitles.length > 0) {
        var title = pageTitles[0].textContent;
        if (title.search(/overview/i) === 0) {
            var activeSecondLevelNavHeaders = document.getElementsByClassName('is-active second-level-nav-header'); 
            if (activeSecondLevelNavHeaders.length > 0) {
                pageTitles[0].textContent = activeSecondLevelNavHeaders[0].textContent;
            }
        }
    }
}
    
//hide empty table cells in bouchures page in mobile view
var brochuresTable = document.getElementsByClassName('brochures-table');
if (brochuresTable.length > 0) {  
    for (var i=0; i<brochuresTable.length; i++) {
        var brochuresTableCells = brochuresTable[i].getElementsByTagName('td');
        console.log(brochuresTableCells.length);
        for (var j=0; j<brochuresTableCells.length; j++) {
            console.log(brochuresTableCells[j].innerHTML);
            console.log(brochuresTableCells[j].style, brochuresTableCells[j].style.width);
            if (brochuresTableCells[j].style.width == "100%" && brochuresTableCells[j].innerHTML.trim() == ""){
                    brochuresTableCells[j].innerHTML = "";
                    brochuresTableCells[j].style.display = "none";
            }
        }
    }
}
</script>    
{%- endif -%} 

{%- if page.layout == 'post' -%}
<script>
    //add a 'back-to-top' link for 'post' layout pages
    var printContents = document.getElementsByClassName('print-content');
    if (printContents.length > 0) {
        var linkNode = document.createElement('a');
        linkNode.setAttribute('href','#');
        linkNode.innerHTML = 'â†‘ Back to top';
        var paragraphNode = document.createElement('p');
        paragraphNode.setAttribute('class','back-to-top');
        paragraphNode.appendChild(linkNode);
        printContents[0].appendChild(paragraphNode);
    }
</script>
{%- endif -%} 

{%- if page.layout == 'resources-alt' -%}
<script>
    // script to hide resources post category buttons on the 'courses' page
    if (window.location.pathname == '/courses/') {
        var resourcesNavButtons = document.getElementsByClassName('bp-buttons');
        if (resourcesNavButtons.length > 0) {
            resourcesNavButtons[0].style.display = 'none';
        }
    }
</script>
{%- endif -%}     
